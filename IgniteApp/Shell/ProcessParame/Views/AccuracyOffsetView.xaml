<UserControl
    x:Class="IgniteApp.Shell.ProcessParame.Views.AccuracyOffsetView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:be="clr-namespace:IgniteApp.Behaviors"
    xmlns:bo="clr-namespace:IgniteApp.Extensions"
    xmlns:conver="clr-namespace:IT.Tangdao.Framework.Converters.Wpf;assembly=IT.Tangdao.Framework"
    xmlns:convert="clr-namespace:IgniteApp.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:IgniteApp.Shell.ProcessParame.Views"
    xmlns:markup="clr-namespace:IT.Tangdao.Framework.Markup;assembly=IT.Tangdao.Framework"
    xmlns:marup="clr-namespace:IT.Tangdao.Framework.Markup;assembly=IT.Tangdao.Framework"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:s="https://github.com/canton7/Stylet"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <conver:BoolToColorConverter
            x:Key="BoolToColorConverter"
            FalseValue="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"
            TrueValue="Red" />
        <!--  定义一个字符串数组  -->
        <x:Array x:Key="MyStringArray" Type="sys:String">
            <sys:String>全部</sys:String>
            <sys:String>Load</sys:String>
            <sys:String>UpLoad</sys:String>
        </x:Array>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <DataGrid
            AutoGenerateColumns="False"
            ItemsSource="{Binding AccuracyOffsetList}"
            SelectionMode="Single"
            SelectionUnit="Cell">
            <i:Interaction.Behaviors>
                <be:DataGridCurrentCellBehavior CurrentCell="{Binding CurrentCell, Mode=TwoWay}" OwnerGrid="{Binding OwnerGrid, Mode=OneWayToSource}" />
            </i:Interaction.Behaviors>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Id}" Header="Id" />
                <DataGridTextColumn Binding="{Binding CutType}" Header="切割类型" />
                <DataGridTemplateColumn Header="Start">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Foreground="{Binding IsXDirty, Converter={StaticResource BoolToColorConverter}}" Text="{Binding StartValue, UpdateSourceTrigger=PropertyChanged}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="End">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Foreground="{Binding IsYDirty, Converter={StaticResource BoolToColorConverter}}" Text="{Binding EndValue, UpdateSourceTrigger=PropertyChanged}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal">
                <TextBlock Margin="5" Text="{markup:BoolToStringMode Binding={Binding IsChecked}, TrueValue='已选中', FalseValue='未选中'}" />
                <CheckBox
                    Margin="5"
                    Content=""
                    IsChecked="{Binding IsChecked}" />
                <TextBox
                    VerticalAlignment="Bottom"
                    IsReadOnly="True"
                    Text="{Binding StatusText}" Width="500" />
            </StackPanel>
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <StackPanel
                    Margin="10"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <ComboBox
                        x:Name="com"
                        Width="100"
                        Height="30"
                        Margin="5"
                        ItemsSource="{markup:OptionList Key=Accuracy}" />
                    <!--<TextBox Text="{bo:Custom Binding={Binding Offset}}" Width="100" Height="30" Margin="5" />-->
                    <TextBox
                        Width="100"
                        Height="30"
                        Margin="5"
                        Text="{Binding Offset}" />
                    <Button
                        Width="80"
                        Height="30"
                        Margin="5"
                        Command="{s:Action OneKeyAdd}"
                        CommandParameter="{Binding SelectedItem, ElementName=com}"
                        Content="增加" />
                    <Button
                        Width="80"
                        Height="30"
                        Margin="5"
                        Command="{s:Action OneKeyDecrease}"
                        CommandParameter="{Binding SelectedItem, ElementName=com}"
                        Content="减少" />
                </StackPanel>

                <StackPanel
                    Grid.Row="1"
                    Margin="10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <Button
                        Width="80"
                        Height="30"
                        Margin="5"
                        Command="{s:Action SaveData}"
                        CommandParameter="{Binding SelectedItem, ElementName=com}"
                        Content="保存" />
                    <Button
                        Width="80"
                        Height="30"
                        Margin="5"
                        Command="{s:Action Undo}"
                        CommandParameter="{Binding SelectedItem, ElementName=com}"
                        Content="撤销" />
                    <Button
                        Width="80"
                        Height="30"
                        Margin="5"
                        Command="{s:Action DeleteData}"
                        CommandParameter="{Binding SelectedItem, ElementName=com}"
                        Content="删除" />
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</UserControl>